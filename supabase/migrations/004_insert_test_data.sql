-- 积分制绩效管理系统 - 测试数据
-- 创建时间: 2024-01-20
-- 描述: 插入测试用户、积分等数据

-- 1. 插入测试用户数据
INSERT INTO users (id, email, name, position, department_id, roles, phone) VALUES
-- 系统管理员
('11111111-1111-1111-1111-111111111111', 'admin@example.com', '张系统', '系统管理员', 
 (SELECT id FROM departments WHERE name = '考核办公室' LIMIT 1), 
 '{"system_admin", "assessment_admin"}', '13800138001'),

-- 考核办管理员 + 分管领导
('22222222-2222-2222-2222-222222222222', 'manager@example.com', '李管理', '考核办主任', 
 (SELECT id FROM departments WHERE name = '考核办公室' LIMIT 1), 
 '{"assessment_admin", "leader"}', '13800138002'),

-- 分管领导
('33333333-3333-3333-3333-333333333333', 'leader@example.com', '王领导', '副局长', 
 (SELECT id FROM departments WHERE name = '办公室' LIMIT 1), 
 '{"leader"}', '13800138003'),

-- 科室负责人
('44444444-4444-4444-4444-444444444444', 'dept_head@example.com', '赵科长', '养护科科长', 
 (SELECT id FROM departments WHERE name = '养护科' LIMIT 1), 
 '{"department_head"}', '13800138004'),

-- 普通职工
('55555555-5555-5555-5555-555555555555', 'employee@example.com', '刘职工', '养护工程师', 
 (SELECT id FROM departments WHERE name = '养护科' LIMIT 1), 
 '{"employee"}', '13800138005'),

('66666666-6666-6666-6666-666666666666', 'employee2@example.com', '陈职工', '工程师', 
 (SELECT id FROM departments WHERE name = '工程科' LIMIT 1), 
 '{"employee"}', '13800138006'),

('77777777-7777-7777-7777-777777777777', 'employee3@example.com', '孙职工', '财务专员', 
 (SELECT id FROM departments WHERE name = '财务科' LIMIT 1), 
 '{"employee"}', '13800138007'),

('88888888-8888-8888-8888-888888888888', 'employee4@example.com', '周职工', '安全员', 
 (SELECT id FROM departments WHERE name = '安全科' LIMIT 1), 
 '{"employee"}', '13800138008');

-- 2. 插入当前月份的基本职责积分数据
INSERT INTO basic_duty_scores (user_id, period, attendance_score, learning_score, discipline_score, created_by) VALUES
-- 刘职工 - 有一些扣分
('55555555-5555-5555-5555-555555555555', to_char(CURRENT_DATE, 'YYYY-MM'), 4.5, 5.0, 9.0, '22222222-2222-2222-2222-222222222222'),
-- 陈职工 - 满分
('66666666-6666-6666-6666-666666666666', to_char(CURRENT_DATE, 'YYYY-MM'), 5.0, 5.0, 10.0, '22222222-2222-2222-2222-222222222222'),
-- 孙职工 - 有扣分
('77777777-7777-7777-7777-777777777777', to_char(CURRENT_DATE, 'YYYY-MM'), 4.0, 4.5, 8.5, '22222222-2222-2222-2222-222222222222'),
-- 周职工 - 有扣分
('88888888-8888-8888-8888-888888888888', to_char(CURRENT_DATE, 'YYYY-MM'), 4.5, 4.0, 9.5, '22222222-2222-2222-2222-222222222222'),
-- 赵科长 - 满分
('44444444-4444-4444-4444-444444444444', to_char(CURRENT_DATE, 'YYYY-MM'), 5.0, 5.0, 10.0, '22222222-2222-2222-2222-222222222222');

-- 3. 插入工作任务数据
INSERT INTO work_tasks (id, user_id, title, description, task_type, status, priority, start_date, end_date, work_load, created_by) VALUES
-- 刘职工的任务
('a1111111-1111-1111-1111-111111111111', '55555555-5555-5555-5555-555555555555', 'G316线路面养护', '对G316国道进行日常路面养护工作', 'daily', 'completed', 'normal', CURRENT_DATE - INTERVAL '10 days', CURRENT_DATE - INTERVAL '1 day', 3, '44444444-4444-4444-4444-444444444444'),
('a2222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555555', '桥梁检测工作', '对辖区内桥梁进行安全检测', 'project', 'completed', 'high', CURRENT_DATE - INTERVAL '15 days', CURRENT_DATE - INTERVAL '5 days', 5, '44444444-4444-4444-4444-444444444444'),

-- 陈职工的任务
('a3333333-3333-3333-3333-333333333333', '66666666-6666-6666-6666-666666666666', '新建工程监理', '负责新建公路工程的监理工作', 'project', 'in_progress', 'high', CURRENT_DATE - INTERVAL '20 days', CURRENT_DATE + INTERVAL '10 days', 8, '44444444-4444-4444-4444-444444444444'),
('a4444444-4444-4444-4444-444444444444', '66666666-6666-6666-6666-666666666666', '工程质量检查', '对在建工程进行质量检查', 'daily', 'completed', 'normal', CURRENT_DATE - INTERVAL '7 days', CURRENT_DATE - INTERVAL '2 days', 2, '44444444-4444-4444-4444-444444444444'),

-- 孙职工的任务
('a5555555-5555-5555-5555-555555555555', '77777777-7777-7777-7777-777777777777', '月度财务报表', '编制月度财务报表', 'daily', 'completed', 'normal', CURRENT_DATE - INTERVAL '5 days', CURRENT_DATE - INTERVAL '1 day', 2, '44444444-4444-4444-4444-444444444444'),

-- 周职工的任务
('a6666666-6666-6666-6666-666666666666', '88888888-8888-8888-8888-888888888888', '安全检查巡查', '对施工现场进行安全检查', 'daily', 'completed', 'high', CURRENT_DATE - INTERVAL '3 days', CURRENT_DATE, 3, '44444444-4444-4444-4444-444444444444');

-- 4. 插入工作实绩评价数据
INSERT INTO performance_evaluations (evaluator_id, evaluated_id, task_id, work_quantity_score, work_quality_score, comments, evaluation_period) VALUES
-- 对刘职工的评价
('44444444-4444-4444-4444-444444444444', '55555555-5555-5555-5555-555555555555', 'a1111111-1111-1111-1111-111111111111', 25.0, 18.0, '工作认真负责，质量较好', to_char(CURRENT_DATE, 'YYYY-MM')),
('66666666-6666-6666-6666-666666666666', '55555555-5555-5555-5555-555555555555', 'a1111111-1111-1111-1111-111111111111', 24.0, 17.0, '完成及时，质量达标', to_char(CURRENT_DATE, 'YYYY-MM')),
('77777777-7777-7777-7777-777777777777', '55555555-5555-5555-5555-555555555555', 'a1111111-1111-1111-1111-111111111111', 26.0, 19.0, '工作量饱满，质量优秀', to_char(CURRENT_DATE, 'YYYY-MM')),

('44444444-4444-4444-4444-444444444444', '55555555-5555-5555-5555-555555555555', 'a2222222-2222-2222-2222-222222222222', 28.0, 19.0, '桥梁检测工作专业细致', to_char(CURRENT_DATE, 'YYYY-MM')),
('66666666-6666-6666-6666-666666666666', '55555555-5555-5555-5555-555555555555', 'a2222222-2222-2222-2222-222222222222', 27.0, 18.0, '检测报告详实准确', to_char(CURRENT_DATE, 'YYYY-MM')),

-- 对陈职工的评价
('44444444-4444-4444-4444-444444444444', '66666666-6666-6666-6666-666666666666', 'a4444444-4444-4444-4444-444444444444', 27.0, 19.0, '质量检查工作细致认真', to_char(CURRENT_DATE, 'YYYY-MM')),
('55555555-5555-5555-5555-555555555555', '66666666-6666-6666-6666-666666666666', 'a4444444-4444-4444-4444-444444444444', 26.0, 18.0, '发现问题及时，处理得当', to_char(CURRENT_DATE, 'YYYY-MM')),
('77777777-7777-7777-7777-777777777777', '66666666-6666-6666-6666-666666666666', 'a4444444-4444-4444-4444-444444444444', 28.0, 20.0, '专业水平高，工作效率好', to_char(CURRENT_DATE, 'YYYY-MM')),

-- 对孙职工的评价
('44444444-4444-4444-4444-444444444444', '77777777-7777-7777-7777-777777777777', 'a5555555-5555-5555-5555-555555555555', 22.0, 16.0, '财务报表准确及时', to_char(CURRENT_DATE, 'YYYY-MM')),
('55555555-5555-5555-5555-555555555555', '77777777-7777-7777-7777-777777777777', 'a5555555-5555-5555-5555-555555555555', 23.0, 17.0, '数据核算仔细', to_char(CURRENT_DATE, 'YYYY-MM')),

-- 对周职工的评价
('44444444-4444-4444-4444-444444444444', '88888888-8888-8888-8888-888888888888', 'a6666666-6666-6666-6666-666666666666', 26.0, 18.0, '安全检查工作到位', to_char(CURRENT_DATE, 'YYYY-MM')),
('55555555-5555-5555-5555-555555555555', '88888888-8888-8888-8888-888888888888', 'a6666666-6666-6666-6666-666666666666', 25.0, 17.0, '发现隐患及时上报', to_char(CURRENT_DATE, 'YYYY-MM')),
('66666666-6666-6666-6666-666666666666', '88888888-8888-8888-8888-888888888888', 'a6666666-6666-6666-6666-666666666666', 27.0, 19.0, '安全意识强，工作负责', to_char(CURRENT_DATE, 'YYYY-MM'));

-- 5. 插入重点工作数据
INSERT INTO key_works (id, title, description, max_score, status, priority, start_date, end_date, assigned_by) VALUES
('k1111111-1111-1111-1111-111111111111', '年度安全生产专项整治', '开展全局安全生产专项整治活动，排查安全隐患', 20.0, 'in_progress', 'high', CURRENT_DATE - INTERVAL '30 days', CURRENT_DATE + INTERVAL '30 days', '22222222-2222-2222-2222-222222222222'),
('k2222222-2222-2222-2222-222222222222', '公路养护质量提升工程', '实施公路养护质量提升工程，改善路况', 18.0, 'assigned', 'high', CURRENT_DATE, CURRENT_DATE + INTERVAL '60 days', '33333333-3333-3333-3333-333333333333'),
('k3333333-3333-3333-3333-333333333333', '数字化管理系统建设', '推进公路管理数字化转型', 20.0, 'completed', 'high', CURRENT_DATE - INTERVAL '90 days', CURRENT_DATE - INTERVAL '10 days', '22222222-2222-2222-2222-222222222222');

-- 6. 插入重点工作参与人员数据
INSERT INTO key_work_participants (key_work_id, user_id, role, score, completion_status, completion_report, completion_date) VALUES
-- 安全生产专项整治参与人员
('k1111111-1111-1111-1111-111111111111', '88888888-8888-8888-8888-888888888888', 'leader', 15.0, 'completed', '已完成安全检查方案制定和现场检查工作', CURRENT_DATE - INTERVAL '5 days'),
('k1111111-1111-1111-1111-111111111111', '55555555-5555-5555-5555-555555555555', 'assistant', 12.0, 'completed', '协助完成现场安全隐患排查', CURRENT_DATE - INTERVAL '3 days'),

-- 公路养护质量提升工程参与人员
('k2222222-2222-2222-2222-222222222222', '44444444-4444-4444-4444-444444444444', 'leader', 0, 'pending', NULL, NULL),
('k2222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555555', 'assistant', 0, 'pending', NULL, NULL),
('k2222222-2222-2222-2222-222222222222', '66666666-6666-6666-6666-666666666666', 'assistant', 0, 'pending', NULL, NULL),

-- 数字化管理系统建设参与人员
('k3333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 'leader', 20.0, 'completed', '负责系统架构设计和技术实施，项目圆满完成', CURRENT_DATE - INTERVAL '10 days'),
('k3333333-3333-3333-3333-333333333333', '77777777-7777-7777-7777-777777777777', 'assistant', 15.0, 'completed', '负责系统财务模块设计和数据迁移', CURRENT_DATE - INTERVAL '10 days');

-- 7. 插入绩效奖励积分数据
INSERT INTO performance_bonuses (user_id, bonus_type, score, title, description, period, awarded_by, created_by) VALUES
-- 表彰加分
('55555555-5555-5555-5555-555555555555', 'award', 5.0, '优秀员工', '年度优秀员工表彰', to_char(CURRENT_DATE, 'YYYY-MM'), '市交通运输局', '22222222-2222-2222-2222-222222222222'),
('66666666-6666-6666-6666-666666666666', 'award', 8.0, '先进工作者', '省级先进工作者表彰', to_char(CURRENT_DATE, 'YYYY-MM'), '省交通运输厅', '22222222-2222-2222-2222-222222222222'),

-- 先进加分
('88888888-8888-8888-8888-888888888888', 'advanced', 6.0, '安全生产先进个人', '安全生产工作表现突出', to_char(CURRENT_DATE, 'YYYY-MM'), '局安委会', '22222222-2222-2222-2222-222222222222'),
('44444444-4444-4444-4444-444444444444', 'advanced', 10.0, '养护工作先进科室负责人', '养护工作成效显著', to_char(CURRENT_DATE, 'YYYY-MM'), '局党组', '22222222-2222-2222-2222-222222222222'),

-- 专项奖励
('11111111-1111-1111-1111-111111111111', 'special', 15.0, '信息化建设突出贡献奖', '在数字化管理系统建设中贡献突出', to_char(CURRENT_DATE, 'YYYY-MM'), '局领导班子', '22222222-2222-2222-2222-222222222222'),
('77777777-7777-7777-7777-777777777777', 'special', 8.0, '财务管理规范化奖励', '财务管理工作规范化程度高', to_char(CURRENT_DATE, 'YYYY-MM'), '局财务科', '22222222-2222-2222-2222-222222222222');

-- 8. 插入上个月的基本职责积分数据（用于趋势分析）
INSERT INTO basic_duty_scores (user_id, period, attendance_score, learning_score, discipline_score, created_by) VALUES
('55555555-5555-5555-5555-555555555555', to_char(CURRENT_DATE - INTERVAL '1 month', 'YYYY-MM'), 5.0, 4.5, 9.5, '22222222-2222-2222-2222-222222222222'),
('66666666-6666-6666-6666-666666666666', to_char(CURRENT_DATE - INTERVAL '1 month', 'YYYY-MM'), 4.5, 5.0, 10.0, '22222222-2222-2222-2222-222222222222'),
('77777777-7777-7777-7777-777777777777', to_char(CURRENT_DATE - INTERVAL '1 month', 'YYYY-MM'), 4.5, 4.0, 9.0, '22222222-2222-2222-2222-222222222222'),
('88888888-8888-8888-8888-888888888888', to_char(CURRENT_DATE - INTERVAL '1 month', 'YYYY-MM'), 5.0, 4.5, 10.0, '22222222-2222-2222-2222-222222222222'),
('44444444-4444-4444-4444-444444444444', to_char(CURRENT_DATE - INTERVAL '1 month', 'YYYY-MM'), 5.0, 5.0, 10.0, '22222222-2222-2222-2222-222222222222');

-- 9. 插入上个月的绩效奖励数据
INSERT INTO performance_bonuses (user_id, bonus_type, score, title, description, period, awarded_by, created_by) VALUES
('55555555-5555-5555-5555-555555555555', 'award', 3.0, '月度优秀', '月度工作表现优秀', to_char(CURRENT_DATE - INTERVAL '1 month', 'YYYY-MM'), '科室推荐', '22222222-2222-2222-2222-222222222222'),
('66666666-6666-6666-6666-666666666666', 'advanced', 4.0, '技术创新奖', '在工程技术方面有创新', to_char(CURRENT_DATE - INTERVAL '1 month', 'YYYY-MM'), '技术科', '22222222-2222-2222-2222-222222222222');