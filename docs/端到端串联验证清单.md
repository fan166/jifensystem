# 端到端串联验证清单 — 登录、权限、评价录入、统计查看、通知标记

> 目的：按步骤验证系统关键流程是否正常工作，并记录结果与问题。

## 前置条件
- 本地开发服务器运行：`http://localhost:5173/`
- `.env` 中 `VITE_SUPABASE_URL` 与 `VITE_SUPABASE_ANON_KEY` 已配置且可用
- 已执行数据库迁移并存在演示用户与权限数据（`admin@company.com`, `manager@company.com`, `employee@company.com`）

## 验证记录格式约定
- 每项验证均填写：结果（通过/失败）、截图或说明、问题与改进建议
- 若后端不可用但前端存在本地回退数据，请注明“回退模式”并仍记录UI行为

---

## 1. 登录流程
- 路径：`/login`
- 方式：
  - 方式A：输入邮箱+密码（Supabase认证）
  - 方式B：演示账户快捷登录（管理员/经理/员工按钮）
  - 方式C：临时登录（开发环境）

- 用例：
  - 管理员登录（`admin@company.com / admin123`）
  - 考核办管理员登录（`manager@company.com / manager123`）
  - 普通员工登录（`employee@company.com / employee123`）

- 期望：登录成功后跳转首页，右上角显示用户名与角色标签；退出后返回`/login`。

- 结果记录：
  - 管理员：
    - 结果：
    - 说明/截图：
    - 问题与建议：
  - 考核办管理员：
    - 结果：
    - 说明/截图：
    - 问题与建议：
  - 普通员工：
    - 结果：
    - 说明/截图：
    - 问题与建议：

---

## 2. 权限可见性与受限访问控制
- 路径：`系统设置 -> 测评权限设置`
- 操作：管理员或考核办管理员切换开关并保存：
  - `普通员工-日常实绩评价可见性`
  - `普通员工-年终集体测评可见性`

- 检查点：
  - 普通员工在开关关闭时看不到`工作实绩积分`入口与相关Tab
  - 开关启用后，普通员工在`绩效评价`页面看到相应Tab
  - 管理员/领导不受开关影响，始终可见评价入口

- 结果记录：
  - 开关关闭：
    - 结果：
    - 说明/截图：
  - 开关开启：
    - 结果：
    - 说明/截图：

---

## 3. 日常实绩评价录入与审批
- 路径：`绩效评价 -> 日常实绩评价`
- 操作：
  - 评价人选择被测评人，填写`工作任务量`与`工作完成质效`、意见
  - 支持批量测评（选择多名人员后统一提交）
  - 管理员/领导执行审核（通过/驳回）

- 期望：
  - 提交后列表出现新记录，状态为`待审核`；总分=任务量+质效
  - 审核通过后状态为`已通过`，记录显示审核人与审核时间
  - 非管理员/领导只能看到与自己相关的记录（我评价的/评价我的）

- 结果记录：
  - 提交测评：
    - 结果：
    - 说明/截图：
  - 审核通过：
    - 结果：
    - 说明/截图：
  - 审核驳回：
    - 结果：
    - 说明/截图：

---

## 4. 年终集体测评录入
- 路径：`绩效评价 -> 年终集体测评`
- 操作：与日常评价类似，按年度选择人员批量评分（任务量0–30，质效0–20）
- 期望：提交成功并能在列表中查看记录；分数校验生效（越界提示）
- 结果记录：
  - 提交测评：
    - 结果：
    - 说明/截图：

---

## 5. 统计查看（个人/最终积分/重点工作）
- 路径：
  - 个人积分：`绩效评价 -> 我的积分` 或 `个人中心/仪表盘`
  - 最终积分统计：`绩效评价 -> 最终积分统计`（管理员可见）
  - 重点工作管理与统计：`积分管理 -> 重点工作`

- 期望：
  - 个人页支持按年度筛选，展示总分与各项构成
  - 最终统计显示人数、平均分、最高/最低分、分布，并支持导出（有权限时）
  - 重点工作页支持创建、审批与统计

- 结果记录：
  - 个人积分：
    - 结果：
    - 说明/截图：
  - 最终积分统计：
    - 结果：
    - 说明/截图：
  - 重点工作：
    - 结果：
    - 说明/截图：

---

## 6. 通知中心与未读标记
- 路径：右上角铃铛图标（下拉），或 `消息通知` 页面
- 操作：
  - 点击单条通知标记为已读；尝试“全部已读”
  - 管理员在通知页发布新公告、编辑与删除

- 期望：
  - 未读数量随点击变化；已读项样式变更
  - 后端不可用时进入回退模式，仍可操作本地示例数据（UI可用）

- 结果记录：
  - 标记已读：
    - 结果：
    - 说明/截图：
  - 全部已读：
    - 结果：
    - 说明/截图：
  - 管理公告：
    - 结果：
    - 说明/截图：

---

## 问题回溯与修复建议
- 列出在验证中发现的问题与建议，包括：权限策略、RLS、前端边界校验、批量操作的异常处理、导出权限与数据一致性等。

## 验证结论
- 结论：
- 风险与后续工作：